<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo de dados</title>
</head>

<body style="background-color: skyblue;color: #2d2d2d;">

    <h1>Jogo de dados</h1>
    <br>
    Quantos R$ Você vai apostar <input type="text" id="input_valor">
    <br>
    Informe os seus números da sorte:<input type="text" id="input_numero" placeholder="1,5,7">
    <br>
    <button>De:<input type="text" id="input_de">Até: <input type="text" id="input_ate"></button>
    <br>
    <button onclick="Pesquisar()">Pesquisar</button>
    <br>
    <button onclick="jogar()">Valendo</button>
    <button onclick="Cadastrar()">Cadastrar número da sorte</button>
    <div id="div_pesquisa"></div> 
    <div id="div_numeros"></div>
    <div id="div_mensagem"></div>
    <div id="div_erro"></div>

</body>

</html>
<script>
    var rodadasFixa = 0;
    var listaSorte = [];
    var saldo = 0;
    var PartidasGanhas = 0;
    var PartidasPerdidas = 0;
    
    function Cadastrar(){
        
        var numero = Number(input_numero.value);

        var indiceNumero = listaSorte.indexOf(numero);

        if(numero == "" || numero < 2 || numero > 12){

            alert("Informe um número que seja maior que 2 e menor que 12");

        }
        else if(indiceNumero == -1 && listaSorte.length < 3){

            listaSorte.push(numero);
            console.log(listaSorte);

            div_mensagem.innerHTML = "O número foi cadastrado"

        } else if (indiceNumero != -1 || listaSorte.length == 3){

            div_erro.innerHTML = "O número já foi cadastrado e o número máximo são três números da sorte";
        } 

    }
    function jogar() {
        
        var texto = "";

        var valorAposta = Number(input_valor.value);
        var numero = Number(input_numero.value);

        var rodadas = Math.random();
         rodadasFixa = rodadas.toFixed(1);
        rodadasFixa = rodadasFixa * 10 + 10;
        
        if(valorAposta > 0 && listaSorte.length == 3){

            if (rodadasFixa >= 10) {
                alert("Número de rodadas que você ira jogar " + rodadasFixa);
            }

            for (let index = 1; index < rodadasFixa; index++) {
                
                var Dado1 = Math.random();
                var Dado1Fixo = Dado1.toFixed(1);
                Dado1Fixo = Dado1Fixo * 5 + 1;
                restoDado1 = Dado1Fixo % 1
                
                if (restoDado1 > 0) {
                    Dado1Fixo = Number.parseInt(Dado1Fixo);
                }
                
                var Dado2 = Math.random();
                var Dado2Fixo = Dado2.toFixed(1);
                Dado2Fixo = Dado2Fixo * 5 + 1;
                restoDado2 = Dado2Fixo % 1
                
                if (restoDado2 > 0) {
                    Dado2Fixo = Number.parseInt(Dado2Fixo);
                }
                
                var totalDado = Dado1Fixo + Dado2Fixo;
            }

            div_numeros.innerHTML = `<br>Seus números da sorte são ${listaSorte}<br>`;

                for (let index = 0; index < rodadasFixa; index++) {
                  
                    if (listaSorte[0] == totalDado) {
                        
                        saldo = saldo + valorAposta * 5;
                        
                        PartidasGanhas ++;
                        
                        texto += `
                        <br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você GANHOU a rodada <br> Seu saldo atual é ${saldo}`
                        
                } else if(listaSorte[1] == totalDado) {
                    
                    saldo = saldo + valorAposta * 5;
                        
                        PartidasGanhas ++;
                        
                        texto += `
                        <br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você GANHOU a rodada <br> Seu saldo atual é ${saldo}`
                        
                    
                }
                else if(listaSorte[2] == totalDado) {
                    
                    saldo = saldo + valorAposta * 5;
                        
                        PartidasGanhas ++;
                        
                        texto += `
                        <br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você GANHOU a rodada <br> Seu saldo atual é ${saldo}`
                        
                    
                } else if(listaSorte[0] != totalDado && listaSorte[1] != totalDado && listaSorte[2] != totalDado){
                    saldo = saldo - valorAposta;
                    
                    PartidasPerdidas ++;
                    
                    texto += `<br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você PERDEU a rodada <br> Seu saldo atual é ${saldo}`
                }
                div_mensagem.innerHTML = texto;
            }
                
            if(saldo > 0){
                
                texto += `<br><h1 style ="color:white">Parabéns você conseguiu ganhar R$ ${saldo} <br> Número de rodadas vencidas ${PartidasGanhas}<br>Número de rodadas perdidas ${PartidasPerdidas} </h1>`;
            } else if(saldo == 0){
                texto += `<br><h1 style ="color:white"> EMPATE Isso é incrível a probabilidade disso acontecer é bem baixa!!!!</h1>`;
            } else {
                texto += `<br><h1 style ="color:white">Pague o que me deve ${saldo}<br> Número de rodadas vencidas ${PartidasGanhas}<br>Número de rodadas perdidas ${PartidasPerdidas}</h1>`;
            }
            div_mensagem.innerHTML = texto;
        } else{

            div_erro.innerHTML = "Valor de aposta tem que ser maior que 0 e/ou quantidade de números da sorte tem que ser 3";
        }
    }
        
    function Pesquisar(){

        var texto2 = "";

        var de = input_de.value;
        var ate = input_ate.value;

        if(de == ""|| ate == ""|| de > ate){

            div_erro.innerHTML = `Informe um intervalo válido`;
        } 
        else if(ate > rodadasFixa){
            alert("Número pesquisado maior que número de rodadas");
        }
        else{

            div_numeros.innerHTML = `Seus números da sorte são ${listaSorte}`
            // div_mensagem.innerHTML = "";

            for (let index = de; index < ate; index++) {
                
                if (listaSorte[0] == totalDado) {
                        
                        saldo = saldo + valorAposta * 5;
                        
                        PartidasGanhas ++;
                        
                        texto2 += `
                        <br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você GANHOU a rodada <br> Seu saldo atual é ${saldo}`
                        
                } else if(listaSorte[1] == totalDado) {
                    
                    saldo = saldo + valorAposta * 5;
                        
                        PartidasGanhas ++;
                        
                        texto2 += `
                        <br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você GANHOU a rodada <br> Seu saldo atual é ${saldo}`
                        
                    
                }
                else if(listaSorte[2] == totalDado) {
                    
                    saldo = saldo + valorAposta * 5;
                        
                        PartidasGanhas ++;
                        
                        texto2 += `
                        <br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você GANHOU a rodada <br> Seu saldo atual é ${saldo}`
                        
                    
                } else if(listaSorte[0] != totalDado && listaSorte[1] != totalDado && listaSorte[2] != totalDado){
                    saldo = saldo - valorAposta;
                    
                    PartidasPerdidas ++;
                    
                    texto2 += `<br>O valor sorteado para o primeiro dado é ${Dado1Fixo} o valor sorteado para o segundo dado é ${Dado2Fixo}<br> e você PERDEU a rodada <br> Seu saldo atual é ${saldo}`
                }
                div_pesquisa.innerHTML = texto2;
            }
        }
    }
        
    </script>